!function(t){"use strict";function e(t,e){var i=window.location.href,a=location.hash;if(i=i.replace(a,""),i.indexOf("?")>=0){var o=i.substring(i.indexOf("?")+1).split("&"),n=!1;o.forEach(function(i,a){i.split("=")[0]==t&&(o[a]=t+"="+e,n=!0)}),n||o.push(t+"="+e),i=i.substring(0,i.indexOf("?")+1)+o.join("&")}else i+="?"+t+"="+e;return i+a}function i(){t(document).off("click",".rtwpvg-add-image"),t(document).on("click",".rtwpvg-add-image",a),t(document).on("click",".rtwpvg-remove-image",o),t(".woocommerce_variation").each(function(){var e=t(this).find(".options");t(this).find(".rtwpvg-gallery-wrapper").insertBefore(e)})}function a(e){e.preventDefault(),e.stopPropagation();var i=this,a=void 0,o=t(this).data("product_variation_id");if("undefined"!=typeof wp&&wp.media&&wp.media.editor){if(a)return void a.open();a=wp.media.frames.select_image=wp.media({title:rtwpvg_admin.choose_image,button:{text:rtwpvg_admin.add_image},library:{type:["image"]},multiple:!0}),a.on("select",function(){var e=a.state().get("selection").toJSON(),c=e.map(function(t){if("image"===t.type){var e=t.id,i=t.sizes;i=void 0===i?{}:i;var a=i.thumbnail,n=i.full,r=a?a.url:n.url;return wp.template("rtwpvg-image")({id:e,url:r,product_variation_id:o})}}).join("");t(i).parent().prev().find(".rtwpvg-images").append(c),r(),n(i)}),a.open()}}function o(e){e.preventDefault(),e.stopPropagation();var i=this;n(this),setTimeout(function(){t(i).parent().remove()},1)}function n(e){t(e).closest(".woocommerce_variation").addClass("variation-needs-update"),t("button.cancel-variation-changes, button.save-variation-changes").removeAttr("disabled"),t("#variable_product_options").trigger("woocommerce_variations_input_changed")}function r(){t(".rtwpvg-images").sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"rtwpvg-sortable-placeholder",start:function(t,e){e.item.css("background-color","#f6f6f6")},stop:function(t,e){e.item.removeAttr("style")},update:function(){n(this)}})}t("#rtwpvg-settings-wrapper").on("click",".nav-tab",function(i){i.preventDefault();var a=t(this),o=a.data("target");if(a.addClass("nav-tab-active").siblings().removeClass("nav-tab-active"),t("#"+o).show().siblings().hide(),t("#_last_active_tab").val(o),history.pushState){var n=e("section",o);window.history.pushState({path:n},"",n)}}),t("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){i(),r()}),t("#variable_product_options").on("woocommerce_variations_added",function(){i(),r()})}(jQuery);
